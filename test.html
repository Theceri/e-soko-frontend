<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css"
    />
  </head>
  <body>
    Welcome to test

    <div id="app">
      <table id="table_id" class="display">
        <thead>
          <tr class="table-secondary">
            <th>Date</th>
            <th>Open</th>
            <th>High</th>
            <th>Low</th>
            <th>Close</th>
            <th>Volume</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="(a, b) in message">
            <td>{{ b }}</td>
            <td class="table-primary">{{ a["1. open"] }}</td>
            <td class="table-success">{{ a["2. high"] }}</td>
            <td class="table-danger">{{ a["3. low"] }}</td>
            <td class="table-warning">{{ a["4. close"] }}</td>
            <td class="table-info">
              {{ a["5. volume"] }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- datatables -->
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.js"></script>
    <script>
      $(document).ready(function () {
        $("#table_id").DataTable({
          dom: "Bfrtip",
          fnRowCallback: function (
            nRow,
            aData,
            iDisplayIndex,
            iDisplayIndexFull
          ) {
            //debugger;
            var index = iDisplayIndexFull + 1;
            $("td:first", nRow).html(index);
            return nRow;
          },
          buttons: ["copy", "csv", "excel", "pdf", "print"],
        });
      });
    </script>

    <script type="text/javascript">
      var app = new Vue({
        el: "#app",
        data: {
          message: "Hello Vue!",
          loading: true,
          errored: "",
        },
        mounted() {
          axios
            .get("http://127.0.0.1:5000/json/forex")
            .then((response) => {
              console.log(response);
              // console.log(typeof response);
              // console.log(typeof response.data);
              // console.log(typeof response.data[0]);
              // console.log(typeof response.data[0]['Weekly Time Series']);
              this.message = response.data[0]["Weekly Time Series"];
            })
            .catch((error) => {
              console.log(error);
              this.errored = error;
            })
            .finally(() => (this.loading = false));
        },
      });
    </script>
  </body>
</html>
